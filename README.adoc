:toc:
:gs-rest-service: link:/guides/gs/rest-service
:spring_version: current
:icons: font
:source-highlighter: prettify
:project_id: gs-actuator-service

https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#production-ready[Spring Boot Actuator]

* sub-project of Spring Boot
* allows
** adding production grade services to your application

== What You Will Build

* "`Hello, world`" RESTful web service with Spring Boot Actuator
** business functionality ==  {gs-rest-service}[Building a RESTful Web Service] 's business functionality
** link:https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#actuator[production-ready-features]
** HTTP GET request

====
[source,sh]
----
$ curl http://localhost:9000/hello-world
----
====

It responds with the following JSON:

====
[source,json]
----
{"id":1,"content":"Hello, World!"}
----
====



=== What You need

include::https://raw.githubusercontent.com/spring-guides/getting-started-macros/main/prereq_editor_jdk_buildtools.adoc[]

include::https://raw.githubusercontent.com/spring-guides/getting-started-macros/main/how_to_complete_this_guide.adoc[]

[[scratch]]
== How to create the project?

* Spring Initializr
** Use this https://start.spring.io/#!type=maven-project&groupId=com.example&artifactId=actuator-service&name=actuator-service&description=Demo%20project%20for%20Spring%20Boot&packageName=com.example.actuator-service&dependencies=web,actuator[pre-initialized project]
* Manually, adding the dependencies
** 'spring-web'
** 'spring-boot-actuator'


== Structure
=== Initial
* Situation once you create the project
* No endpoints defined in this application
* Run locally
** `./gradlew clean build`
** `java -jar build/libs/actuator-service-0.0.1-SNAPSHOT.jar`
*** In logs, you can see -- ' Exposing 1 endpoint(s) beneath base path '/actuator' ' -- that /actuator endpoint is exposed
* You can call to
** link:https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#actuator.endpoints[actuator's built-in endpoints]
*** most of them are not defined
**** `curl localhost:8080/actuator/auditevents` or
**** `curl localhost:8080/actuator/beans`
**** ..
*** some of them yes
**** `curl localhost:8080/actuator/health`
** `curl localhost:8080`
*** server is running but no business endpoints defined yet
*** output is a generic JSON response from the Actuator `/error` endpoint
**** if you `curl localhost:8080/actuator/error`-> you get the same output
----
{"timestamp":1384788106983,"error":"Not Found","status":404,"message":""}
----

=== Complete
* Endpoint '/hello-world' defined
* Spring Boot Actuator
** by default run on port 8080
** you can customize it
====
[source,properties]
----
include::complete/src/main/resources/application.properties[]
----
====
* Run locally
** via gradle
*** `./gradlew bootRun` or
*** `./gradlew build` & `java -jar build/libs/actuator-service-0.0.1-SNAPSHOT.jar`
**** create a .jar and executes it
** via maven
*** `./mvnw spring-boot:run`
*** `./mvnw clean package` & `java -jar build/libs/actuator-service-0.0.1-SNAPSHOT.jar`
**** create a .jar and executes it
* You can call to
** link:https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#actuator.endpoints[actuator's built-in endpoints]
*** `curl localhost:9001/actuator`
*** `curl localhost:9001/actuator/health`
** endpoint '/hello-world'
*** `curl localhost:9000/hello-world`

====
[source,bash]
----
$ curl localhost:9090/hello-world
{"id":1,"content":"Hello, Stranger!"}
----
====
* Testing
** `src/test/java/com/example/actuatorservice/HelloWorldApplicationTests.java`
*** ensures that
**** Your controller is responsive
**** Your management endpoint is responsive
*** starts the application on a random port


== See Also

The following guides may also be helpful:

* https://spring.io/guides/gs/spring-boot/[Building an Application with Spring Boot]
* https://spring.io/guides/gs/serving-web-content/[Serving Web Content with Spring MVC]

include::https://raw.githubusercontent.com/spring-guides/getting-started-macros/main/footer.adoc[]
